<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body{
            display: flex;
            flex-direction: column;
            place-items: center;

            height: 100vh;
            

        }
        .containner{
            background: linear-gradient(rgb(36, 129, 133),rgb(30, 148, 156),rgb(13, 102, 90));
            min-height: 50%;
            width: 80%;
            border-radius: 5px;

            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;

            label{
                font-size: 50px;
                font-weight: bold;
            }
            #ville{
                border-radius:5px;
                border: none;
                height: 40px;
                font-size: 30px;
            }
            #bouton{
             
            }
        }
       #infos{
        font-size: 30px;

       }
    </style>

</head>
<body>
    <h1>Météo by Riaz</h1>
    <div class="containner">
         <label for="ville">Entrez le nom d'une ville</label>
         <input type="text" name="" id="ville">
         <input type="submit" name="" id="bouton">
         <div id="infos"></div>
    </div>  
    <script>
        var bouton = document.getElementById("bouton");
        var infos = document.getElementById("infos");
        async function meteo(ville){
           try{
           var ville = document.getElementById("ville").value;
           var Appi_KEY="4a712c18bcee825e5e40393518cc3ec7";
           var url =`https://api.openweathermap.org/data/2.5/weather?q=${ville}&units=metric&lang=fr&appid=${Appi_KEY}`;
   
           console.log("Connexion en cours");
           infos.textContent="Connexion en cours..."
           const reponse = await fetch(url);
           console.log(reponse);
           if(!reponse.ok){
               throw new Error("Inpossible de trouver la ville ou clé invalide");
           } 
           else{
               var donnees = await reponse.json();
           console.log(`A ${ville} situé dans le ${donnees.sys.country} il fait actuellemnt ${donnees.main.temp}°C et la visibilité est de ${donnees.visibility/1000} kilomètres`);
               infos.innerHTML=`A <strong>${ville}</strong> il fait actuellement <strong>${donnees.main.temp}°C</strong> et la visibilité est de <strong>${donnees.visibility/1000}</strong>kilomètres`
           }
           }
           catch(err){
               console.error(" "+err);
               infos.textContent="Il y a eu un problème avec la connexion"+err; 
           }
        };
        bouton.addEventListener("click", meteo);
       </script>
</body>
</html>
